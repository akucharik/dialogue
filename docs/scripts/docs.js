(()=>{"use strict";class e{constructor(e,t=0,s=0){this.delay=0,this.speed=0,this.text="",this.text=e,this.speed=t,this.delay=s}}class t{constructor(t,s=0,r=0){this.delay=0,this.speed=0,this.letters=[],this.speed=s,this.delay=r;const n=Array.from(t);this.letters=n.map(((t,n)=>0===n?new e(t,s,r):new e(t,s)))}}class s{constructor(e,t=0,s=0){this.delay=0,this.speed=0,this.words=[],this.words=e,this.speed=t,this.delay=s}}class r{constructor(e){this.paragraphs=[],this.paragraphs=e}}class n{constructor(e){this.element=document.createElement("span"),this.element.classList.add("dia-dialogue__character")," "===e.text&&this.element.classList.add("dia-dialogue__character--space"),this.letter=e}render(){return this.element.appendChild(document.createTextNode(this.letter.text)),this}}class a{constructor(e){this.letterRenderers=[],this.element=document.createElement("span"),this.element.classList.add("dia-dialogue__word"),this.word=e}render(){return this.word.letters.forEach((e=>{const t=new n(e);this.element.appendChild(t.render().element),this.letterRenderers.push(t)})),this}}class i{constructor(e){this.letterRenderers=[],this.wordRenderers=[],this.element=document.createElement("p"),this.element.classList.add("dia-dialogue__paragraph"),this.paragraph=e}render(){return this.paragraph.words.forEach(((e,t)=>{const s=new a(e);this.element.appendChild(s.render().element),t!==this.paragraph.words.length-1&&this.element.appendChild(document.createTextNode(" ")),this.wordRenderers.push(s),this.letterRenderers=this.letterRenderers.concat(s.letterRenderers)})),this}}class d{constructor(e,t){this.letterRenderers=[],this.paragraphRenderers=[],this.dialogue=e,this.element=t}render(){this.dialogue.paragraphs.forEach((e=>{const t=new i(e);this.element.appendChild(t.render().element),this.paragraphRenderers.push(t),this.letterRenderers=this.letterRenderers.concat(t.letterRenderers)}));let e=window.gsap.timeline();return this.letterRenderers.forEach(((t,s)=>{const r=.02*s,n=window.gsap.timeline(),a=window.CustomEase.create("custom","M0,0 C0.34,0.114 0.362,0.902 0.362,1 0.37,0.985 0.414,0.873 0.455,0.811 0.51,0.726 0.573,0.753 0.586,0.762 0.662,0.812 0.719,0.981 0.726,0.998 0.788,0.914 0.84,0.936 0.859,0.95 0.878,0.964 0.897,0.985 0.911,0.998 0.922,0.994 0.939,0.984 0.954,0.984 0.969,0.984 1,1 1,1 ");n.set(t.element,{opacity:1}).from(t.element,{duration:.95,y:-10,ease:a}),e.add(n,r)})),this}}(()=>{const e=new t("Hi...",50),n=new t("I'm dialogue.",50,750),a=new t("And I'm a second line.",50,1e3),i=new s([e,n]),h=new s([a]),l=new r([i,h]),c=document.getElementById("dialogue");c&&new d(l,c).render()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixLQUFLYSxRQUFRTSxZQUFZaUIsRUFBa0JsQixTQUFTTCxTQUNwRGIsS0FBS21DLG1CQUFtQlQsS0FBS1UsR0FDN0JwQyxLQUFLdUIsZ0JBQWtCdkIsS0FBS3VCLGdCQUFnQlMsT0FBT0ksRUFBa0JiLG9CQUl6RSxJQUFJYyxFQUFXQyxPQUFPQyxLQUFLRixXQXFCM0IsT0FuQkFyQyxLQUFLdUIsZ0JBQWdCQyxTQUFRLENBQUNnQixFQUFVakMsS0FLcEMsTUFBTWtDLEVBQVksSUFBUWxDLEVBR3BCbUMsRUFBaUJKLE9BQU9DLEtBQUtGLFdBRTdCTSxFQUFPTCxPQUFPTSxXQUFXQyxPQUFPLFNBQVUsaVJBRWhESCxFQUNLSSxJQUFJTixFQUFTM0IsUUFBUyxDQUFFa0MsUUFBUyxJQUNqQzNDLEtBQUtvQyxFQUFTM0IsUUFBUyxDQUFFbUMsU0FBVSxJQUFPQyxHQUFJLEdBQUlOLEtBQUFBLElBRXZETixFQUFTcEIsSUFBSXlCLEVBQWdCRCxNQUcxQnpDLE1DdkRmLE1BQ0ksTUFBTWtELEVBQXNCLElBQUlqRCxFQUFhLFFBQVMsSUFDaERrRCxFQUFzQixJQUFJbEQsRUFBYSxnQkFBa0IsR0FBSSxLQUM3RG1ELEVBQXNCLElBQUluRCxFQUFhLHlCQUEyQixHQUFJLEtBRXRFb0QsRUFBZ0MsSUFBSTdDLEVBQWtCLENBQUMwQyxFQUFPQyxJQUM5REcsRUFBZ0MsSUFBSTlDLEVBQWtCLENBQUM0QyxJQUV2RGxCLEVBQXFCLElBQUl4QixFQUFTLENBQUMyQyxFQUFZQyxJQUUvQ0MsRUFBc0N6QyxTQUFTMEMsZUFBZSxZQUVoRUQsR0FDOEMsSUFBSXRCLEVBQW9CQyxFQUFVcUIsR0FFL0RyQyxVQWZ6QixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGlhbG9ndWUvLi9zcmMvZGlhbG9ndWUtbGV0dGVyLnRzIiwid2VicGFjazovL2RpYWxvZ3VlLy4vc3JjL2RpYWxvZ3VlLXdvcmQudHMiLCJ3ZWJwYWNrOi8vZGlhbG9ndWUvLi9zcmMvZGlhbG9ndWUtcGFyYWdyYXBoLnRzIiwid2VicGFjazovL2RpYWxvZ3VlLy4vc3JjL2RpYWxvZ3VlLnRzIiwid2VicGFjazovL2RpYWxvZ3VlLy4vc3JjL2Nzcy1yZW5kZXJlci9kaWFsb2d1ZS1sZXR0ZXItY3NzLXJlbmRlcmVyLnRzIiwid2VicGFjazovL2RpYWxvZ3VlLy4vc3JjL2Nzcy1yZW5kZXJlci9kaWFsb2d1ZS13b3JkLWNzcy1yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9kaWFsb2d1ZS8uL3NyYy9jc3MtcmVuZGVyZXIvZGlhbG9ndWUtcGFyYWdyYXBoLWNzcy1yZW5kZXJlci50cyIsIndlYnBhY2s6Ly9kaWFsb2d1ZS8uL3NyYy9jc3MtcmVuZGVyZXIvZGlhbG9ndWUtY3NzLXJlbmRlcmVyLnRzIiwid2VicGFjazovL2RpYWxvZ3VlLy4vZG9jcy9zcmMvZG9jcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJRGlhbG9ndWVFbnRpdHkgfSBmcm9tIFwiLi9kaWFsb2d1ZS1lbnRpdHkuaW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2d1ZUxldHRlciBpbXBsZW1lbnRzIElEaWFsb2d1ZUVudGl0eSB7XG4gICAgZGVsYXkgPSAwO1xuXG4gICAgc3BlZWQgPSAwO1xuICAgIFxuICAgIHRleHQgPSAnJztcblxuICAgIGNvbnN0cnVjdG9yICh0ZXh0OiBzdHJpbmcsIHNwZWVkID0gMCwgZGVsYXkgPSAwKSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IElEaWFsb2d1ZUVudGl0eSB9IGZyb20gXCIuL2RpYWxvZ3VlLWVudGl0eS5pbnRlcmZhY2VcIjtcbmltcG9ydCB7IERpYWxvZ3VlTGV0dGVyIH0gZnJvbSBcIi4vZGlhbG9ndWUtbGV0dGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2d1ZVdvcmQgaW1wbGVtZW50cyBJRGlhbG9ndWVFbnRpdHkge1xuICAgIGRlbGF5ID0gMDtcblxuICAgIHNwZWVkID0gMDtcbiAgICBcbiAgICBsZXR0ZXJzOiBBcnJheTxEaWFsb2d1ZUxldHRlcj4gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yICh0ZXh0OiBzdHJpbmcsIHNwZWVkID0gMCwgZGVsYXkgPSAwKSB7XG4gICAgICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcbiAgICAgICAgdGhpcy5kZWxheSA9IGRlbGF5O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbGV0dGVyczogQXJyYXk8c3RyaW5nPiA9IEFycmF5LmZyb20odGV4dCk7XG4gICAgICAgIHRoaXMubGV0dGVycyA9IGxldHRlcnMubWFwKChsZXR0ZXI6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEaWFsb2d1ZUxldHRlcihsZXR0ZXIsIHNwZWVkLCBkZWxheSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGlhbG9ndWVMZXR0ZXIobGV0dGVyLCBzcGVlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJRGlhbG9ndWVFbnRpdHkgfSBmcm9tIFwiLi9kaWFsb2d1ZS1lbnRpdHkuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBEaWFsb2d1ZVdvcmQgfSBmcm9tIFwiLi9kaWFsb2d1ZS13b3JkXCI7XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2d1ZVBhcmFncmFwaCBpbXBsZW1lbnRzIElEaWFsb2d1ZUVudGl0eSB7XG4gICAgZGVsYXkgPSAwO1xuXG4gICAgc3BlZWQgPSAwO1xuICAgIFxuICAgIHdvcmRzOiBBcnJheTxEaWFsb2d1ZVdvcmQ+ID0gW107XG5cbiAgICBjb25zdHJ1Y3RvciAod29yZHM6IEFycmF5PERpYWxvZ3VlV29yZD4sIHNwZWVkID0gMCwgZGVsYXkgPSAwKSB7XG4gICAgICAgIHRoaXMud29yZHMgPSB3b3JkcztcbiAgICAgICAgdGhpcy5zcGVlZCA9IHNwZWVkO1xuICAgICAgICB0aGlzLmRlbGF5ID0gZGVsYXk7XG5cbiAgICAgICAgLy8gRGVsYXkgZm9yIGZpcnN0IHdvcmRcXFxuICAgICAgICAvKlxuICAgICAgICB0aGlzLndvcmRzID0gd29yZHMubWFwKCh3b3JkOiBEaWFsb2d1ZVdvcmQsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGlhbG9ndWVXb3JkKGxldHRlciwgc3BlZWQsIGRlbGF5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEaWFsb2d1ZVdvcmQobGV0dGVyLCBzcGVlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAqL1xuICAgIH1cbn1cbiIsImltcG9ydCB7IERpYWxvZ3VlUGFyYWdyYXBoIH0gZnJvbSBcIi4vZGlhbG9ndWUtcGFyYWdyYXBoXCI7XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2d1ZSB7XG4gICAgcGFyYWdyYXBoczogQXJyYXk8RGlhbG9ndWVQYXJhZ3JhcGg+ID0gW107XG5cbiAgICBjb25zdHJ1Y3RvciAocGFyYWdyYXBoczogQXJyYXk8RGlhbG9ndWVQYXJhZ3JhcGg+KSB7XG4gICAgICAgIHRoaXMucGFyYWdyYXBocyA9IHBhcmFncmFwaHM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRGlhbG9ndWVMZXR0ZXIgfSBmcm9tIFwiLi4vZGlhbG9ndWUtbGV0dGVyXCI7XG5pbXBvcnQgeyBJRGlhbG9ndWVDc3NSZW5kZXJlciB9IGZyb20gXCIuL2RpYWxvZ3VlLWNzcy1yZW5kZXJlci5pbnRlcmZhY2VcIjtcblxuZXhwb3J0IGNsYXNzIERpYWxvZ3VlTGV0dGVyQ3NzUmVuZGVyZXIgaW1wbGVtZW50cyBJRGlhbG9ndWVDc3NSZW5kZXJlciB7XG4gICAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XG5cbiAgICBsZXR0ZXI6IERpYWxvZ3VlTGV0dGVyO1xuXG4gICAgY29uc3RydWN0b3IgKGxldHRlcjogRGlhbG9ndWVMZXR0ZXIpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGlhLWRpYWxvZ3VlX19jaGFyYWN0ZXInKTtcblxuICAgICAgICBpZiAobGV0dGVyLnRleHQgPT09ICcgJykge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2RpYS1kaWFsb2d1ZV9fY2hhcmFjdGVyLS1zcGFjZScpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmxldHRlciA9IGxldHRlcjtcbiAgICB9XG5cbiAgICByZW5kZXIgKCk6IERpYWxvZ3VlTGV0dGVyQ3NzUmVuZGVyZXIge1xuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5sZXR0ZXIudGV4dCkpO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IERpYWxvZ3VlTGV0dGVyQ3NzUmVuZGVyZXIgfSBmcm9tIFwiLi9kaWFsb2d1ZS1sZXR0ZXItY3NzLXJlbmRlcmVyXCI7XG5pbXBvcnQgeyBEaWFsb2d1ZVdvcmQgfSBmcm9tIFwiLi4vZGlhbG9ndWUtd29yZFwiO1xuaW1wb3J0IHsgSURpYWxvZ3VlQ3NzUmVuZGVyZXIgfSBmcm9tIFwiLi9kaWFsb2d1ZS1jc3MtcmVuZGVyZXIuaW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2d1ZVdvcmRDc3NSZW5kZXJlciBpbXBsZW1lbnRzIElEaWFsb2d1ZUNzc1JlbmRlcmVyIHtcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgIGxldHRlclJlbmRlcmVyczogQXJyYXk8RGlhbG9ndWVMZXR0ZXJDc3NSZW5kZXJlcj4gPSBbXTtcblxuICAgIHdvcmQ6IERpYWxvZ3VlV29yZDtcblxuICAgIGNvbnN0cnVjdG9yICh3b3JkOiBEaWFsb2d1ZVdvcmQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGlhLWRpYWxvZ3VlX193b3JkJyk7XG4gICAgICAgIHRoaXMud29yZCA9IHdvcmQ7XG4gICAgfVxuXG4gICAgcmVuZGVyICgpOiBEaWFsb2d1ZVdvcmRDc3NSZW5kZXJlciB7XG4gICAgICAgIHRoaXMud29yZC5sZXR0ZXJzLmZvckVhY2goKGxldHRlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGV0dGVyUmVuZGVyZXIgPSBuZXcgRGlhbG9ndWVMZXR0ZXJDc3NSZW5kZXJlcihsZXR0ZXIpO1xuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQobGV0dGVyUmVuZGVyZXIucmVuZGVyKCkuZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmxldHRlclJlbmRlcmVycy5wdXNoKGxldHRlclJlbmRlcmVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgRGlhbG9ndWVMZXR0ZXJDc3NSZW5kZXJlciB9IGZyb20gXCIuL2RpYWxvZ3VlLWxldHRlci1jc3MtcmVuZGVyZXJcIjtcbmltcG9ydCB7IERpYWxvZ3VlUGFyYWdyYXBoIH0gZnJvbSBcIi4uL2RpYWxvZ3VlLXBhcmFncmFwaFwiO1xuaW1wb3J0IHsgRGlhbG9ndWVXb3JkQ3NzUmVuZGVyZXIgfSBmcm9tIFwiLi9kaWFsb2d1ZS13b3JkLWNzcy1yZW5kZXJlclwiO1xuaW1wb3J0IHsgSURpYWxvZ3VlQ3NzUmVuZGVyZXIgfSBmcm9tIFwiLi9kaWFsb2d1ZS1jc3MtcmVuZGVyZXIuaW50ZXJmYWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2d1ZVBhcmFncmFwaENzc1JlbmRlcmVyIGltcGxlbWVudHMgSURpYWxvZ3VlQ3NzUmVuZGVyZXIge1xuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gICAgbGV0dGVyUmVuZGVyZXJzOiBBcnJheTxEaWFsb2d1ZUxldHRlckNzc1JlbmRlcmVyPiA9IFtdO1xuXG4gICAgcGFyYWdyYXBoOiBEaWFsb2d1ZVBhcmFncmFwaDtcblxuICAgIHdvcmRSZW5kZXJlcnM6IEFycmF5PERpYWxvZ3VlV29yZENzc1JlbmRlcmVyPiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IgKHBhcmFncmFwaDogRGlhbG9ndWVQYXJhZ3JhcGgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZGlhLWRpYWxvZ3VlX19wYXJhZ3JhcGgnKTtcbiAgICAgICAgdGhpcy5wYXJhZ3JhcGggPSBwYXJhZ3JhcGg7XG4gICAgfVxuXG4gICAgcmVuZGVyICgpOiBEaWFsb2d1ZVBhcmFncmFwaENzc1JlbmRlcmVyIHtcbiAgICAgICAgdGhpcy5wYXJhZ3JhcGgud29yZHMuZm9yRWFjaCgod29yZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdvcmRSZW5kZXJlciA9IG5ldyBEaWFsb2d1ZVdvcmRDc3NSZW5kZXJlcih3b3JkKTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHdvcmRSZW5kZXJlci5yZW5kZXIoKS5lbGVtZW50KTtcblxuICAgICAgICAgICAgLy8gQWRkIGEgc3BhY2UgYWZ0ZXIgZWFjaCB3b3JkIGV4Y2VwdCB0aGUgbGFzdCBvbmVcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gdGhpcy5wYXJhZ3JhcGgud29yZHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy53b3JkUmVuZGVyZXJzLnB1c2god29yZFJlbmRlcmVyKVxuICAgICAgICAgICAgdGhpcy5sZXR0ZXJSZW5kZXJlcnMgPSB0aGlzLmxldHRlclJlbmRlcmVycy5jb25jYXQod29yZFJlbmRlcmVyLmxldHRlclJlbmRlcmVycyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbiIsImRlY2xhcmUgZ2xvYmFsIHtcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICAgICAgQ3VzdG9tRWFzZTogYW55O1xuICAgICAgICBnc2FwOiBhbnk7XG4gICAgfVxufVxuXG5pbXBvcnQgeyBEaWFsb2d1ZSB9IGZyb20gJy4uL2RpYWxvZ3VlJztcbmltcG9ydCB7IElEaWFsb2d1ZUNzc1JlbmRlcmVyIH0gZnJvbSAnLi9kaWFsb2d1ZS1jc3MtcmVuZGVyZXIuaW50ZXJmYWNlJztcbmltcG9ydCB7IERpYWxvZ3VlTGV0dGVyQ3NzUmVuZGVyZXIgfSBmcm9tICcuL2RpYWxvZ3VlLWxldHRlci1jc3MtcmVuZGVyZXInO1xuaW1wb3J0IHsgRGlhbG9ndWVQYXJhZ3JhcGhDc3NSZW5kZXJlciB9IGZyb20gJy4vZGlhbG9ndWUtcGFyYWdyYXBoLWNzcy1yZW5kZXJlcic7XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2d1ZUNzc1JlbmRlcmVyIGltcGxlbWVudHMgSURpYWxvZ3VlQ3NzUmVuZGVyZXIge1xuICAgIGRpYWxvZ3VlOiBEaWFsb2d1ZTtcbiAgICBcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICAgIGxldHRlclJlbmRlcmVyczogQXJyYXk8RGlhbG9ndWVMZXR0ZXJDc3NSZW5kZXJlcj4gPSBbXTtcblxuICAgIHBhcmFncmFwaFJlbmRlcmVyczogQXJyYXk8RGlhbG9ndWVQYXJhZ3JhcGhDc3NSZW5kZXJlcj4gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yIChkaWFsb2d1ZTogRGlhbG9ndWUsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZGlhbG9ndWUgPSBkaWFsb2d1ZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG5cbiAgICByZW5kZXIgKCk6IERpYWxvZ3VlQ3NzUmVuZGVyZXIge1xuICAgICAgICB0aGlzLmRpYWxvZ3VlLnBhcmFncmFwaHMuZm9yRWFjaCgocGFyYWdyYXBoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJhZ3JhcGhSZW5kZXJlciA9IG5ldyBEaWFsb2d1ZVBhcmFncmFwaENzc1JlbmRlcmVyKHBhcmFncmFwaCk7XG5cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChwYXJhZ3JhcGhSZW5kZXJlci5yZW5kZXIoKS5lbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMucGFyYWdyYXBoUmVuZGVyZXJzLnB1c2gocGFyYWdyYXBoUmVuZGVyZXIpO1xuICAgICAgICAgICAgdGhpcy5sZXR0ZXJSZW5kZXJlcnMgPSB0aGlzLmxldHRlclJlbmRlcmVycy5jb25jYXQocGFyYWdyYXBoUmVuZGVyZXIubGV0dGVyUmVuZGVyZXJzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gVGltZWxpbmVcbiAgICAgICAgbGV0IHRpbWVsaW5lID0gd2luZG93LmdzYXAudGltZWxpbmUoKTtcblxuICAgICAgICB0aGlzLmxldHRlclJlbmRlcmVycy5mb3JFYWNoKChyZW5kZXJlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE86IEZhY3RvciBvdXQgZGlmZmVyZW50IHdheXMgb2YgcmVuZGVyaW5nXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIG51bWJlciBpbiBzZWNvbmRzXG4gICAgICAgICAgICAvLyBjb25zdCBkZWxheSA9IDAuMDIwIC8vKHJlbmRlcmVyLmxldHRlci5zcGVlZCArIHJlbmRlcmVyLmxldHRlci5kZWxheSkgLyAxMDAwIDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IDAuMDIwICogaW5kZXg7XG5cbiAgICAgICAgICAgIC8vIFRpbWVsaW5lXG4gICAgICAgICAgICBjb25zdCBsZXR0ZXJUaW1lbGluZSA9IHdpbmRvdy5nc2FwLnRpbWVsaW5lKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGVhc2UgPSB3aW5kb3cuQ3VzdG9tRWFzZS5jcmVhdGUoXCJjdXN0b21cIiwgXCJNMCwwIEMwLjM0LDAuMTE0IDAuMzYyLDAuOTAyIDAuMzYyLDEgMC4zNywwLjk4NSAwLjQxNCwwLjg3MyAwLjQ1NSwwLjgxMSAwLjUxLDAuNzI2IDAuNTczLDAuNzUzIDAuNTg2LDAuNzYyIDAuNjYyLDAuODEyIDAuNzE5LDAuOTgxIDAuNzI2LDAuOTk4IDAuNzg4LDAuOTE0IDAuODQsMC45MzYgMC44NTksMC45NSAwLjg3OCwwLjk2NCAwLjg5NywwLjk4NSAwLjkxMSwwLjk5OCAwLjkyMiwwLjk5NCAwLjkzOSwwLjk4NCAwLjk1NCwwLjk4NCAwLjk2OSwwLjk4NCAxLDEgMSwxIFwiKTtcblxuICAgICAgICAgICAgbGV0dGVyVGltZWxpbmVcbiAgICAgICAgICAgICAgICAuc2V0KHJlbmRlcmVyLmVsZW1lbnQsIHsgb3BhY2l0eTogMSB9KVxuICAgICAgICAgICAgICAgIC5mcm9tKHJlbmRlcmVyLmVsZW1lbnQsIHsgZHVyYXRpb246IDAuOTUwLCB5OiAtMTAsIGVhc2UgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChsZXR0ZXJUaW1lbGluZSwgc3RhcnRUaW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLypcbiAgICBib3VuY2UgKHJlbmRlcmVyLCB0aW1lbGluZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmxldHRlclJlbmRlcmVycy5mb3JFYWNoKChyZW5kZXJlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE86IEZhY3RvciBvdXQgZGlmZmVyZW50IHdheXMgb2YgcmVuZGVyaW5nXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIG51bWJlciBpbiBzZWNvbmRzXG4gICAgICAgICAgICAvLyBjb25zdCBkZWxheSA9IDAuMDIwIC8vKHJlbmRlcmVyLmxldHRlci5zcGVlZCArIHJlbmRlcmVyLmxldHRlci5kZWxheSkgLyAxMDAwIDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IDAuMDIwICogaW5kZXg7XG5cbiAgICAgICAgICAgIC8vIFRpbWVsaW5lXG4gICAgICAgICAgICBjb25zdCBsZXR0ZXJUaW1lbGluZSA9IHdpbmRvdy5nc2FwLnRpbWVsaW5lKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGVhc2UgPSB3aW5kb3cuQ3VzdG9tRWFzZS5jcmVhdGUoXCJjdXN0b21cIiwgXCJNMCwwIEMwLjM0LDAuMTE0IDAuMzYyLDAuOTAyIDAuMzYyLDEgMC4zNywwLjk4NSAwLjQxNCwwLjg3MyAwLjQ1NSwwLjgxMSAwLjUxLDAuNzI2IDAuNTczLDAuNzUzIDAuNTg2LDAuNzYyIDAuNjYyLDAuODEyIDAuNzE5LDAuOTgxIDAuNzI2LDAuOTk4IDAuNzg4LDAuOTE0IDAuODQsMC45MzYgMC44NTksMC45NSAwLjg3OCwwLjk2NCAwLjg5NywwLjk4NSAwLjkxMSwwLjk5OCAwLjkyMiwwLjk5NCAwLjkzOSwwLjk4NCAwLjk1NCwwLjk4NCAwLjk2OSwwLjk4NCAxLDEgMSwxIFwiKTtcblxuICAgICAgICAgICAgbGV0dGVyVGltZWxpbmVcbiAgICAgICAgICAgICAgICAuc2V0KHJlbmRlcmVyLmVsZW1lbnQsIHsgb3BhY2l0eTogMSB9KVxuICAgICAgICAgICAgICAgIC5mcm9tKHJlbmRlcmVyLmVsZW1lbnQsIHsgZHVyYXRpb246IDAuOTUwLCB5OiAtMTAsIGVhc2UgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChsZXR0ZXJUaW1lbGluZSwgc3RhcnRUaW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICovXG59IiwiaW1wb3J0IHsgRGlhbG9ndWUsIERpYWxvZ3VlQ3NzUmVuZGVyZXIsIERpYWxvZ3VlUGFyYWdyYXBoLCBEaWFsb2d1ZVdvcmQgfSBmcm9tICcuLi8uLi9lc20vaW5kZXgnO1xuXG4oKCkgPT4ge1xuICAgIGNvbnN0IHdvcmQxOiBEaWFsb2d1ZVdvcmQgPSBuZXcgRGlhbG9ndWVXb3JkKCdIaS4uLicsIDUwKTtcbiAgICBjb25zdCB3b3JkMjogRGlhbG9ndWVXb3JkID0gbmV3IERpYWxvZ3VlV29yZCgnSVxcJ20gZGlhbG9ndWUuJywgNTAsIDc1MCk7XG4gICAgY29uc3Qgd29yZDM6IERpYWxvZ3VlV29yZCA9IG5ldyBEaWFsb2d1ZVdvcmQoJ0FuZCBJXFwnbSBhIHNlY29uZCBsaW5lLicsIDUwLCAxMDAwKTtcblxuICAgIGNvbnN0IHBhcmFncmFwaDE6IERpYWxvZ3VlUGFyYWdyYXBoID0gbmV3IERpYWxvZ3VlUGFyYWdyYXBoKFt3b3JkMSwgd29yZDJdKTtcbiAgICBjb25zdCBwYXJhZ3JhcGgyOiBEaWFsb2d1ZVBhcmFncmFwaCA9IG5ldyBEaWFsb2d1ZVBhcmFncmFwaChbd29yZDNdKTtcblxuICAgIGNvbnN0IGRpYWxvZ3VlOiBEaWFsb2d1ZSA9IG5ldyBEaWFsb2d1ZShbcGFyYWdyYXBoMSwgcGFyYWdyYXBoMl0pO1xuXG4gICAgY29uc3QgZGlhbG9ndWVFbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGlhbG9ndWUnKTtcblxuICAgIGlmIChkaWFsb2d1ZUVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZGlhbG9ndWVSZW5kZXJlcjogRGlhbG9ndWVDc3NSZW5kZXJlciA9IG5ldyBEaWFsb2d1ZUNzc1JlbmRlcmVyKGRpYWxvZ3VlLCBkaWFsb2d1ZUVsZW1lbnQpO1xuXG4gICAgICAgIGRpYWxvZ3VlUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgfVxufSkoKTsiXSwibmFtZXMiOlsiRGlhbG9ndWVMZXR0ZXIiLCJjb25zdHJ1Y3RvciIsInRleHQiLCJzcGVlZCIsImRlbGF5IiwidGhpcyIsIkRpYWxvZ3VlV29yZCIsImxldHRlcnMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJsZXR0ZXIiLCJpbmRleCIsIkRpYWxvZ3VlUGFyYWdyYXBoIiwid29yZHMiLCJEaWFsb2d1ZSIsInBhcmFncmFwaHMiLCJEaWFsb2d1ZUxldHRlckNzc1JlbmRlcmVyIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInJlbmRlciIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJEaWFsb2d1ZVdvcmRDc3NSZW5kZXJlciIsIndvcmQiLCJsZXR0ZXJSZW5kZXJlcnMiLCJmb3JFYWNoIiwibGV0dGVyUmVuZGVyZXIiLCJwdXNoIiwiRGlhbG9ndWVQYXJhZ3JhcGhDc3NSZW5kZXJlciIsInBhcmFncmFwaCIsIndvcmRSZW5kZXJlcnMiLCJ3b3JkUmVuZGVyZXIiLCJsZW5ndGgiLCJjb25jYXQiLCJEaWFsb2d1ZUNzc1JlbmRlcmVyIiwiZGlhbG9ndWUiLCJwYXJhZ3JhcGhSZW5kZXJlcnMiLCJwYXJhZ3JhcGhSZW5kZXJlciIsInRpbWVsaW5lIiwid2luZG93IiwiZ3NhcCIsInJlbmRlcmVyIiwic3RhcnRUaW1lIiwibGV0dGVyVGltZWxpbmUiLCJlYXNlIiwiQ3VzdG9tRWFzZSIsImNyZWF0ZSIsInNldCIsIm9wYWNpdHkiLCJkdXJhdGlvbiIsInkiLCJ3b3JkMSIsIndvcmQyIiwid29yZDMiLCJwYXJhZ3JhcGgxIiwicGFyYWdyYXBoMiIsImRpYWxvZ3VlRWxlbWVudCIsImdldEVsZW1lbnRCeUlkIl0sInNvdXJjZVJvb3QiOiIifQ==